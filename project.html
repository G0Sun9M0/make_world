<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ˜˜Wordle(ê³ ì„±ëª¨, ì„œìƒí˜¸)</title>
    <style>
        input {
            width: 40px;
            height: 60px;
            font-size: 35px;
            text-align: center;
        }
        body {
            text-align: center;
        }
    </style>
</head>
<body>
    <head>
        <h1>Wordle</h1>
        <hr>
    </head>
    <section id="gameSection">
        <br>
        <input class="input" maxlength="1">
        <input class="input" maxlength="1">
        <input class="input" maxlength="1">
        <input class="input" maxlength="1">
        <input class="input" maxlength="1">
        <input class="input" maxlength="1">
    </section>
    <script>
        // ë¯¸ë¦¬ ì •ì˜ëœ ë‹¨ì–´ ëª©ë¡
        var ë‹¨ì–´ëª©ë¡ = ['sensor', 'laptop', 'animal', 'window', 'person', 'school', 'friend', 'family', 'number', 'garden'];  
        
        // ëœë¤ìœ¼ë¡œ ë‹µ ì„¤ì •
        var ë‹µ = ë‹¨ì–´ëª©ë¡[Math.floor(Math.random() * ë‹¨ì–´ëª©ë¡.length)];
        console.log(ë‹µ); // í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì½˜ì†”ì— ë‹µ ì¶œë ¥ (í•„ìš”ì‹œ ì‚­ì œ)

        var ì‹œë„íšŸìˆ˜ = 0;   // ì‹œë„ íšŸìˆ˜ë¥¼ ê¸°ë¡í•˜ëŠ” ë³€ìˆ˜

        function ì œì¶œí•˜ê¸°() {
            ì‹œë„íšŸìˆ˜++;  // ì œì¶œí•  ë•Œë§ˆë‹¤ ì‹œë„ íšŸìˆ˜ ì¦ê°€
            var input = document.querySelectorAll('.input');
            var ë§ì¶˜ê°¯ìˆ˜ = 0;  // ëª‡ ê°œì˜ ê¸€ìë¥¼ ë§ì·„ëŠ”ì§€ ê¸°ë¡í•˜ëŠ” ë³€ìˆ˜

            // ì…ë ¥í•œ ê¸€ìë¥¼ ê²€ì‚¬
            for (let i = 0; i < 6; i++) {
                if (input[i].value === ë‹µ[i]) {
                    input[i].style.background = 'green';
                    ë§ì¶˜ê°¯ìˆ˜++;
                } else if (ë‹µ.includes(input[i].value)) {
                    input[i].style.background = 'yellow';
                } else {
                    input[i].style.background = 'lightgrey';
                }
                input[i].classList.remove('input');
            }

            // ëª¨ë“  ê¸€ìë¥¼ ë§ì¶˜ ê²½ìš° (6ê°œì˜ ê¸€ìê°€ ëª¨ë‘ ì´ˆë¡ìƒ‰ì¸ ê²½ìš°)
            if (ë§ì¶˜ê°¯ìˆ˜ === 6) {
                alert(`ì„±ê³µ! ${ì‹œë„íšŸìˆ˜}ë²ˆ ë§Œì— ë§ì·„ìŠµë‹ˆë‹¤.`);
                // ë‹¤ì‹œ ì‹œì‘ ë²„íŠ¼ ìƒì„±
                var resetButton = document.createElement('button');
                resetButton.textContent = 'ë‹¤ì‹œ ì‹œì‘';
                resetButton.onclick = resetGame;  // ë²„íŠ¼ í´ë¦­ ì‹œ resetGame í•¨ìˆ˜ í˜¸ì¶œ
                document.body.appendChild(resetButton);
                return;  // ì„±ê³µí•˜ë©´ ì¶”ê°€ ì…ë ¥ì„ ë°›ì§€ ì•Šê³  ì¢…ë£Œ
            }

            // ìƒˆë¡œìš´ ì…ë ¥ ì¹¸ ìƒì„± (6ê°œ)
            var template = `
                <div>
                    <input class="input" maxlength="1">
                    <input class="input" maxlength="1">
                    <input class="input" maxlength="1">
                    <input class="input" maxlength="1">
                    <input class="input" maxlength="1">
                    <input class="input" maxlength="1">
                </div>`;
            document.querySelector('body').insertAdjacentHTML('beforeend', template);

            // ìƒˆë¡œ ìƒì„±ëœ ì…ë ¥ì¹¸ì—ë„ ì•ŒíŒŒë²³ í•„í„° ì ìš©
            setInputFilter();
        }

        // ì•ŒíŒŒë²³ë§Œ ì…ë ¥ ê°€ëŠ¥í•˜ë„ë¡ í•„í„°ë§
        function setInputFilter() {
            var inputs = document.querySelectorAll('.input');
            inputs.forEach(function(input) {
                input.addEventListener('input', function() {
                    this.value = this.value.replace(/[^a-zA-Z]/g, '').toLowerCase();
                });
            });
        }

        // ê²Œì„ ë¦¬ì…‹ í•¨ìˆ˜
        function resetGame() {
            // ì‹œë„ íšŸìˆ˜ ì´ˆê¸°í™”
            ì‹œë„íšŸìˆ˜ = 0;
            
            // ëœë¤í•œ ìƒˆ ë‹µ ì„¤ì •
            ë‹µ = ë‹¨ì–´ëª©ë¡[Math.floor(Math.random() * ë‹¨ì–´ëª©ë¡.length)];
            console.log(ë‹µ); // ìƒˆë¡œ ì„¤ì •ëœ ë‹µì„ ì½˜ì†”ì— ì¶œë ¥
            
            // ê²Œì„ í™”ë©´ ì´ˆê¸°í™”
            var gameSection = document.getElementById('gameSection');
            gameSection.innerHTML = `
                <br>
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
            `;
            
            // "ë‹¤ì‹œ ì‹œì‘" ë²„íŠ¼ ì œê±°
            var resetButton = document.querySelector('button');
            if (resetButton) resetButton.remove();

            // ìƒˆë¡œ ìƒì„±ëœ ì…ë ¥ í•„í„° ì ìš©
            setInputFilter();
        }

        // ì—”í„° í‚¤ë¡œ ì œì¶œí•˜ê¸°
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                ì œì¶œí•˜ê¸°();
            }
        });

        // ì´ˆê¸° ì…ë ¥ í•„í„° ì„¤ì •
        setInputFilter();
    </script>
</body>
</html>