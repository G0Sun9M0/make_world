<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ˜˜Wordle(ê³ ì„±ëª¨, ì„œìƒí˜¸)</title>
    <style>
        input {
            width: 50px;
            height: 50px;
            border: 1 solid #e5e7eb;
            font-size: 35px;
            border-radius: .375rem;
            text-align: center;
            margin: 0.3px;
        }

        body {
            text-align: center;
        }

        nav {
            margin-top: 1px;
            font-size: 18px;
        }

        #timer,
        #attempts,
        #stage,
        #timeLimit {
            font-size: 18px;
            margin-top: 10px;
        }

        progress {
            width: 7;
            /* í”„ë¡œê·¸ë ˆìŠ¤ë°”ì˜ ë„ˆë¹„ */
            height: 20px;
            /* í”„ë¡œê·¸ë ˆìŠ¤ë°”ì˜ ë†’ì´ */
            background-color: green;
        }

        .hidden {
            display: none;
        }

        /* ì–¸ì–´ ë° ëª¨ë“œ ì„ íƒ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .select-btn {
            padding: 10px 20px;
            font-size: 1.3em;
            margin: 10px;
            cursor: pointer;
        }

        /* ê²Œì„ ì‹œì‘ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .start-btn {
            font-size:1.1em; padding:5px 20px;
            
        }
    </style>
</head>

<body>
    <header>
        <h1>ğŸ˜˜Wordle</h1>
        <hr>
    </header>

    <!-- ì–¸ì–´ ì„ íƒ ë° ëª¨ë“œ ì„ íƒ í™”ë©´ -->
    <div id="startScreen">
        <!-- ì–¸ì–´ ì„ íƒ ë²„íŠ¼ -->
        <div>
            <input type="radio" id="englishButton" class="select-btn" value="ì˜ì–´ë¡œ í”Œë ˆì´"><span>ì˜ì–´</span>
            <input type="radio" id="koreanButton" class="select-btn" value="í•œê¸€ë¡œ í”Œë ˆì´"><span>í•œê¸€(ê³µì‚¬ì¤‘)</span>
        </div>

        <!-- ëª¨ë“œ ì„ íƒ ë²„íŠ¼ -->
        <div>
            <input type="radio" id="normalModeButton" class="select-btn" value="ì¼ë°˜ ëª¨ë“œ"><span>ì¼ë°˜ ëª¨ë“œ</span>
            <input type="radio" id="challengeButton" class="select-btn" value="ì±Œë¦°ì§€ ëª¨ë“œ"><span>ì±Œë¦°ì§€ ëª¨ë“œ</span>
        </div>

        <!-- ê²Œì„ ì‹œì‘ ë²„íŠ¼ -->
        <div>
            <button id="startButton" class="start-btn" value="ê²Œì„ ì‹œì‘">ê²Œì„ì‹œì‘</button>
        </div>
    </div>

    <!-- ê²Œì„ ì •ë³´ ì„¹ì…˜ -->
    <nav id="gameInfo" class="hidden">
        <div>í˜„ì¬ ë‹¨ê³„: <span id="currentStage">1</span> / 6</div>
        <div id="timer">í”Œë ˆì´ ì‹œê°„: <span id="time">00:00</span></div>
        <div id="timeLimit" class="hidden">
            ë‚¨ì€ ì‹œê°„:
            <progress id="progressBar" value="100" max="100"></progress>
        </div>
        <div id="attempts">ì‹œë„ íšŸìˆ˜: <span id="attemptCount">0</span> / <span id="maxAttempts">ë¬´ì œí•œ</span></div>
    </nav>

    <section id="gameSection" class="hidden">
        <br>
        <input class="input" maxlength="1">
        <input class="input" maxlength="1">
        <input class="input" maxlength="1">
        <input class="input" maxlength="1">
        <input class="input" maxlength="1">
        <input class="input" maxlength="1">
    </section>

    <script>
    var ë‹¨ì–´ëª©ë¡ = {
        english: ['sensor', 'laptop', 'animal', 'window', 'person', 'school', 'friend', 'family', 'number', 'garden'],
        korean: ['ì„¼ì„œ', 'ë…¸íŠ¸ë¶', 'ë™ë¬¼', 'ì°½ë¬¸', 'ì‚¬ëŒ', 'í•™êµ', 'ì¹œêµ¬', 'ê°€ì¡±', 'ìˆ«ì', 'ì •ì›']
    };
    var í˜„ì¬ë‹¨ì–´ëª©ë¡ = ë‹¨ì–´ëª©ë¡.english;
    var ì‚¬ìš©ëœë‹¨ì–´ = [];
    var ë‹¨ê³„ = 1;
    var ìµœëŒ€ë‹¨ê³„ = 6;
    var ë‹µ;
    var ì‹œë„íšŸìˆ˜ = 0;
    var ìµœëŒ€ì‹œë„ = Infinity;
    var ì œí•œì‹œê°„ = 180;
    var íƒ€ì´ë¨¸ì‘ë™ì¤‘ = false;
    var ì‹œì‘ì‹œê°„;
    var ì œí•œì‹œê°„íƒ€ì´ë¨¸;
    var ì±Œë¦°ì§€ëª¨ë“œ = false;
    var í˜„ì¬ì–¸ì–´ = 'english';

        // ê° ë‹¨ê³„ë³„ ì œí•œ ì‹œê°„ê³¼ ì‹œë„ íšŸìˆ˜ ì„¤ì •
        var ë‹¨ê³„ì •ë³´ = [
            { ì‹œê°„: 180, ì‹œë„íšŸìˆ˜: Infinity }, // 1ë‹¨ê³„
            { ì‹œê°„: 150, ì‹œë„íšŸìˆ˜: 15 },      // 2ë‹¨ê³„
            { ì‹œê°„: 120, ì‹œë„íšŸìˆ˜: 13 },      // 3ë‹¨ê³„
            { ì‹œê°„: 90, ì‹œë„íšŸìˆ˜: 11 },      // 4ë‹¨ê³„
            { ì‹œê°„: 60, ì‹œë„íšŸìˆ˜: 8 },       // 5ë‹¨ê³„
            { ì‹œê°„: 30, ì‹œë„íšŸìˆ˜: 6 }        // 6ë‹¨ê³„
        ];

        function ìƒˆë‹¨ì–´() {
            var í›„ë³´ë‹¨ì–´ëª©ë¡ = í˜„ì¬ë‹¨ì–´ëª©ë¡.filter(word => !ì‚¬ìš©ëœë‹¨ì–´.includes(word));
            ë‹µ = í›„ë³´ë‹¨ì–´ëª©ë¡[Math.floor(Math.random() * í›„ë³´ë‹¨ì–´ëª©ë¡.length)];
            ì‚¬ìš©ëœë‹¨ì–´.push(ë‹µ);
            console.log(ë‹µ);
        }

        function updateTimer() {
            var í˜„ì¬ì‹œê°„ = new Date();
            var ê²½ê³¼ì‹œê°„ = Math.floor((í˜„ì¬ì‹œê°„ - ì‹œì‘ì‹œê°„) / 1000);
            var ë¶„ = String(Math.floor(ê²½ê³¼ì‹œê°„ / 60)).padStart(2, '0');
            var ì´ˆ = String(ê²½ê³¼ì‹œê°„ % 60).padStart(2, '0');
            document.getElementById('time').textContent = `${ë¶„}:${ì´ˆ}`;
        }

        function startTimeLimitTimer() {
            var ë‚¨ì€ì‹œê°„ = ì œí•œì‹œê°„;
            var progressBar = document.getElementById('progressBar');
            progressBar.max = ì œí•œì‹œê°„;
            progressBar.value = ì œí•œì‹œê°„;

            ì œí•œì‹œê°„íƒ€ì´ë¨¸ = setInterval(function () {
                ë‚¨ì€ì‹œê°„--;
                progressBar.value = ë‚¨ì€ì‹œê°„;

                if (ë‚¨ì€ì‹œê°„ <= 0) {
                    clearInterval(ì œí•œì‹œê°„íƒ€ì´ë¨¸);
                    alert("ì‹œê°„ ì´ˆê³¼! ê²Œì„ì´ ì¢…ë£Œë©ë‹ˆë‹¤.");
                    resetGame();
                }
            }, 1000);
        }

        function ì œì¶œí•˜ê¸°() {
            if (ì‹œë„íšŸìˆ˜ >= ìµœëŒ€ì‹œë„) {
                alert(`ì‹œë„ íšŸìˆ˜ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤!`);
                resetGame();
                return;
            }

            ì‹œë„íšŸìˆ˜++;
            document.getElementById('attemptCount').textContent = ì‹œë„íšŸìˆ˜;

            var input = document.querySelectorAll('.input');
            var ë§ì¶˜ê°¯ìˆ˜ = 0;

            for (let i = 0; i < 6; i++) {
                if (input[i].value === ë‹µ[i]) {
                    input[i].style.background = '#22c55e';
                    ë§ì¶˜ê°¯ìˆ˜++;
                } else if (ë‹µ.includes(input[i].value)) {
                    input[i].style.background = '#eab308';
                } else {
                    input[i].style.background = '#6b7280';
                    input[i].style.color = '#ffffff';
                }
                input[i].classList.remove('input');
            }

            if (ë§ì¶˜ê°¯ìˆ˜ === 6) {
                alert(`ì„±ê³µ! ${ì‹œë„íšŸìˆ˜}ë²ˆ ë§Œì— ë§ì·„ìŠµë‹ˆë‹¤.`);
                if (!ì±Œë¦°ì§€ëª¨ë“œ && ë‹¨ê³„ < ìµœëŒ€ë‹¨ê³„) {
                    ë‹¨ê³„++;
                    ë‹¤ìŒë‹¨ê³„();
                } else {
                    ì™„ë£Œ();
                }
                return;
            }

            var template = `
            <div style="margin-top: 5px;">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
            </div>`;
            document.querySelector('#gameSection').insertAdjacentHTML('beforeend', template);
            setInputFilter();
            setAutoTab();
        }

        function setInputFilter() {
            var inputs = document.querySelectorAll('.input');
            inputs.forEach(function (input) {
                input.addEventListener('input', function () {
                    this.value = this.value.replace(/[^a-zA-Zã„±-ã…ã…-ã…£ê°€-í£]/g, '');
                });
            });
        }

        function setAutoTab() {
    var inputs = document.querySelectorAll('.input');
    inputs.forEach(function (input, index) {
        // keydown ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        input.addEventListener('keydown', function (event) {
            // Backspace í‚¤ ì²˜ë¦¬
            if (event.key === 'Backspace') {
                if (this.value === '' && index > 0) {
                    inputs[index - 1].focus();  // ì´ì „ ì…ë ¥ í•„ë“œë¡œ ì´ë™
                    inputs[index - 1].value = '';  // ì´ì „ ì…ë ¥ í•„ë“œì˜ ê°’ ì‚­ì œ
                }
            }
        });

        // input ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ (ì²« ì…ë ¥ ì‹œ íƒ€ì´ë¨¸ ì‹œì‘ ë° ìë™ íƒ­ ê¸°ëŠ¥)
        input.addEventListener('input', function () {
            this.value = this.value.replace(/[^a-zA-Zã„±-ã…ã…-ã…£ê°€-í£]/g, '');  // ìœ íš¨í•œ ë¬¸ìì¸ì§€ í•„í„°ë§

            // ì²« ë²ˆì§¸ ì…ë ¥ ì‹œ íƒ€ì´ë¨¸ ì‹œì‘
            if (index === 0 && !íƒ€ì´ë¨¸ì‘ë™ì¤‘) {
                ì‹œì‘íƒ€ì´ë¨¸();  // ì¼ë°˜ íƒ€ì´ë¨¸ ì‹œì‘
                if (!ì±Œë¦°ì§€ëª¨ë“œ) startTimeLimitTimer();  // ì±Œë¦°ì§€ ëª¨ë“œê°€ ì•„ë‹ ë•Œ ì œí•œ ì‹œê°„ íƒ€ì´ë¨¸ ì‹œì‘
            }

            // í•œ ê¸€ìë¥¼ ì…ë ¥í•œ í›„, ë‹¤ìŒ ì…ë ¥ í•„ë“œë¡œ ì´ë™
            if (this.value.length === 1 && index < inputs.length - 1) {
                inputs[index + 1].focus();
            }
        });
    });
}



        function ì‹œì‘íƒ€ì´ë¨¸() {
            if (!íƒ€ì´ë¨¸ì‘ë™ì¤‘) {
                íƒ€ì´ë¨¸ì‘ë™ì¤‘ = true;
                ì‹œì‘ì‹œê°„ = new Date();
                setInterval(updateTimer, 1000);
            }
        }

        function resetGame() {
            // ì‹œì‘ í™”ë©´ì„ ë‹¤ì‹œ í‘œì‹œí•˜ê³  ê²Œì„ í™”ë©´ì„ ìˆ¨ê¹€
            document.getElementById('startScreen').classList.remove('hidden');
            document.getElementById('gameInfo').classList.add('hidden');
            document.getElementById('gameSection').classList.add('hidden');
            ë‹¨ê³„ = 1;
            ì‚¬ìš©ëœë‹¨ì–´ = [];
            ì‹œë„íšŸìˆ˜ = 0;
        }

        function ë‹¤ìŒë‹¨ê³„() {
            clearInterval(ì œí•œì‹œê°„íƒ€ì´ë¨¸);

            ìƒˆë‹¨ì–´();

            var currentInfo = ë‹¨ê³„ì •ë³´[ë‹¨ê³„ - 1];
            ì œí•œì‹œê°„ = currentInfo.ì‹œê°„;
            ìµœëŒ€ì‹œë„ = currentInfo.ì‹œë„íšŸìˆ˜;

            document.getElementById('currentStage').textContent = ë‹¨ê³„;
            if (!ì±Œë¦°ì§€ëª¨ë“œ) {
                document.getElementById('progressBar').max = ì œí•œì‹œê°„;
                document.getElementById('progressBar').value = ì œí•œì‹œê°„;
                document.getElementById('maxAttempts').textContent = ìµœëŒ€ì‹œë„ === Infinity ? 'ë¬´ì œí•œ' : ìµœëŒ€ì‹œë„;
            }
            ì‹œë„íšŸìˆ˜ = 0;
            document.getElementById('attemptCount').textContent = ì‹œë„íšŸìˆ˜;

            document.getElementById('gameSection').innerHTML = `
                <br>
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">
                <input class="input" maxlength="1">`;

            setInputFilter();
            setAutoTab();

            if (!ì±Œë¦°ì§€ëª¨ë“œ) startTimeLimitTimer();
        }

        function ì™„ë£Œ() {
            alert("ê²Œì„ ì™„ë£Œ! ëª¨ë“  ë‹¨ê³„ë¥¼ ì„±ê³µí–ˆìŠµë‹ˆë‹¤!");
            resetGame();
        }

        // ì–¸ì–´ ì„ íƒ ë²„íŠ¼
        document.getElementById('englishButton').addEventListener('click', function () {
            í˜„ì¬ë‹¨ì–´ëª©ë¡ = ë‹¨ì–´ëª©ë¡.english;
            alert('ì˜ì–´ ëª¨ë“œë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤.');
        });

        document.getElementById('koreanButton').addEventListener('click', function () {
            í˜„ì¬ë‹¨ì–´ëª©ë¡ = ë‹¨ì–´ëª©ë¡.korean;
            alert('í•œê¸€ ëª¨ë“œë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤.');
        });

        // ëª¨ë“œ ì„ íƒ ë²„íŠ¼
        document.getElementById('normalModeButton').addEventListener('click', function () {
            ì±Œë¦°ì§€ëª¨ë“œ = false;
            alert('ì¼ë°˜ ëª¨ë“œë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤.');
        });

        document.getElementById('challengeButton').addEventListener('click', function () {
            ì±Œë¦°ì§€ëª¨ë“œ = true;
            ì œí•œì‹œê°„ = 30;
            ìµœëŒ€ì‹œë„ = 4;
            document.getElementById('timeLimit').classList.remove('hidden');
            document.getElementById('progressBar').max = ì œí•œì‹œê°„;
            document.getElementById('progressBar').value = ì œí•œì‹œê°„;
            document.getElementById('maxAttempts').textContent = ìµœëŒ€ì‹œë„;
        });

        // ê²Œì„ ì‹œì‘ ë²„íŠ¼
        document.getElementById('startButton').addEventListener('click', function () {
            // ì‹œì‘ í™”ë©´ì„ ìˆ¨ê¸°ê³  ê²Œì„ í™”ë©´ì„ í‘œì‹œ
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameInfo').classList.remove('hidden');
            document.getElementById('gameSection').classList.remove('hidden');
            ìƒˆë‹¨ì–´();
        });

        document.addEventListener('keydown', function (event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                ì œì¶œí•˜ê¸°();
                var inputs = document.querySelectorAll('.input');
                if (inputs.length > 0) {
                    inputs[0].focus();
                }
            }
        });

        ìƒˆë‹¨ì–´();
        setInputFilter();
        setAutoTab();
    </script>
</body>
</html>